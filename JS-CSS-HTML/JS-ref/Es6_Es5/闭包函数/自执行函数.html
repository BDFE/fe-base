<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>匿名自执行函数</title>
</head>
<body>
<script>
//    我们知道所有的变量，如果不加上var关键字，则默认的会添加到全局对象的属性上去，这样的临时变量加入全局对象有很多坏处，
//    比如：别的函数可能误用这些变量；造成全局对象过于庞大，影响访问速度(因为变量的取值是需要从原型链上遍历的)。
//    除了每次使用变量都是用var关键字外，我们在实际情况下经常遇到这样一种情况，即有的函数只需要执行一次，其内部变量无需维护，
//    比如UI的初始化，那么我们可以使用闭包：

    var data= {
        table : [1,2,3,"hello"],
        tree : {}
    };

    (function(dm){
        for(var i = 0; i < dm.table.length; i++){
            var row = dm.table[i];
            dm.tree[row] = row
        }
        console.log(dm.table)
        console.log(dm.tree)
    })(data);

//    我们创建了一个匿名的函数，并立即执行它，由于外部无法引用它内部的变量，
// 因此在函数执行完后会立刻释放资源，关键是不污染全局对象。
</script>
</body>
</html>