<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Insert title here</title>
    <!-- <script src="" type="text/javascript"></script> -->
    <script type="text/javascript">
        function openWin() {
            var params = new Array();
            params[0] = new Array("P1", "11");
            params[1] = new Array("P2", "22");
            var child =
                "file:///Users/kongwentao/Documents/GitHub/FrontEndKonwledgeDemos/JS-CSS-HTML/JS-ref/%E5%A4%9A%E9%A1%B5%E9%9D%A2%E8%81%94%E5%8A%A8/%E5%AD%90%E9%A1%B5%E9%9D%A2.html";

            var popupwin = window.open(
                child,
                "Map", "status=0,title=0,height=600,width=800,scrollbars=1");
            //onload只能执行一次，也就是如果子窗口有onload事件，可能会覆盖。
            console.log('onload', window.location.host, params);
            setTimeout(() => {
                    popupwin.postMessage(params, '*');
                },2000)
            // popupwin.onload = (e) => {
            //     console.log('onload', );
            // };
            // popupwin.onunload = (e) => {
            //     var val = popupwin.returnValue;
            //     // alert(val);
            // }
        }
    </script>
</head>

<body>
    <input type="button" value="Open Window" onclick="openWin()" />
</body>

</html>